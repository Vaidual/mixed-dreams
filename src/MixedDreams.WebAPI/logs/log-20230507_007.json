{"@t":"2023-05-06T21:18:04.8712095Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","elapsed":"22","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"BACKUP DATABASE [mixed-dreams] TO DISK = 'C:/mixed-dreams-backups'","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"29580d4c-9be5-4e2e-a9d7-4f8ccfec4829","ActionName":"MixedDreams.WebAPI.Controllers.BackupController.CreateBackupAsync (MixedDreams.WebAPI)","RequestId":"0HMQEETFMT5NC:00000009","RequestPath":"/api/backup/create","ConnectionId":"0HMQEETFMT5NC"}
{"@t":"2023-05-06T21:18:04.9563218Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["191.2369"],"@l":"Error","@x":"Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open backup device 'C:/mixed-dreams-backups'. Operating system error 5(Access is denied.).\r\nBACKUP DATABASE is terminating abnormally.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)\r\n   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)\r\n   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)\r\n   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)\r\n   at MixedDreams.Infrastructure.Services.BackupService.CreateBackupAsync() in D:\\projects\\dotNet\\MixedDreams\\src\\MixedDreams.Infrastructure\\Services\\BackupService.cs:line 29\r\n   at MixedDreams.WebAPI.Controllers.BackupController.CreateBackupAsync() in D:\\projects\\dotNet\\MixedDreams\\src\\MixedDreams.WebAPI\\Controllers\\BackupController.cs:line 22\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\nClientConnectionId:90e9cd6e-6c27-46fe-b9f4-15ec29b2579c\r\nError Number:3201,State:1,Class:16","RequestMethod":"POST","RequestPath":"/api/backup/create","StatusCode":500,"Elapsed":191.2369,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQEETFMT5NC:00000009","ConnectionId":"0HMQEETFMT5NC"}
{"@t":"2023-05-06T21:18:05.0780779Z","@mt":"Something went wrong: {@exception}","@l":"Error","exception":{"Errors":[{"Source":"Core Microsoft SqlClient Data Provider","Number":3201,"State":1,"Class":16,"Server":"Vaidual","Message":"Cannot open backup device 'C:/mixed-dreams-backups'. Operating system error 5(Access is denied.).","Procedure":"","LineNumber":1,"$type":"SqlError"},{"Source":"Core Microsoft SqlClient Data Provider","Number":3013,"State":1,"Class":16,"Server":"Vaidual","Message":"BACKUP DATABASE is terminating abnormally.","Procedure":"","LineNumber":1,"$type":"SqlError"}],"ClientConnectionId":"90e9cd6e-6c27-46fe-b9f4-15ec29b2579c","Class":16,"LineNumber":1,"Number":3201,"Procedure":"","Server":"Vaidual","State":1,"Source":"Core Microsoft SqlClient Data Provider","IsTransient":false,"SqlState":null,"BatchCommand":null,"ErrorCode":-2146232060,"TargetSite":"Void OnError(Microsoft.Data.SqlClient.SqlException, Boolean, System.Action`1[System.Action])","Message":"Cannot open backup device 'C:/mixed-dreams-backups'. Operating system error 5(Access is denied.).\r\nBACKUP DATABASE is terminating abnormally.","Data":[{"Key":"HelpLink.ProdName","Value":"Microsoft SQL Server","$type":"DictionaryEntry"},{"Key":"HelpLink.ProdVer","Value":"16.00.1000","$type":"DictionaryEntry"},{"Key":"HelpLink.EvtSrc","Value":"MSSQLServer","$type":"DictionaryEntry"},{"Key":"HelpLink.EvtID","Value":"3201","$type":"DictionaryEntry"},{"Key":"HelpLink.BaseHelpUrl","Value":"https://go.microsoft.com/fwlink","$type":"DictionaryEntry"},{"Key":"HelpLink.LinkId","Value":"20476","$type":"DictionaryEntry"}],"InnerException":null,"HelpLink":null,"HResult":-2146232060,"StackTrace":"   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)\r\n   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)\r\n   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)\r\n   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)\r\n   at MixedDreams.Infrastructure.Services.BackupService.CreateBackupAsync() in D:\\projects\\dotNet\\MixedDreams\\src\\MixedDreams.Infrastructure\\Services\\BackupService.cs:line 29\r\n   at MixedDreams.WebAPI.Controllers.BackupController.CreateBackupAsync() in D:\\projects\\dotNet\\MixedDreams\\src\\MixedDreams.WebAPI\\Controllers\\BackupController.cs:line 22\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at MixedDreams.WebAPI.Middlewares.ExceptionMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in D:\\projects\\dotNet\\MixedDreams\\src\\MixedDreams.WebAPI\\Middlewares\\ExceptionMiddleware.cs:line 21","$type":"SqlException"},"SourceContext":"MixedDreams.WebAPI.Middlewares.ExceptionMiddleware","RequestId":"0HMQEETFMT5NC:00000009","RequestPath":"/api/backup/create","ConnectionId":"0HMQEETFMT5NC"}
{"@t":"2023-05-06T21:18:29.5908340Z","@mt":"Starting web application"}
